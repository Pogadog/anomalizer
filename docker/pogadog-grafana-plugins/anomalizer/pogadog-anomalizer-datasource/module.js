/*! For license information please see module.js.LICENSE.txt */
define(["@grafana/data","@grafana/runtime","@grafana/ui","lodash","react"],((t,e,r,n,o)=>(()=>{var a=[(t,e)=>{"use strict";function r(t){return"object"!=typeof t||"toString"in t?t:Object.prototype.toString.call(t).slice(8,-1)}Object.defineProperty(e,"__esModule",{value:!0});var n="object"==typeof process&&!0;function o(t,e){if(!t){if(n)throw new Error("Invariant failed");throw new Error(e())}}e.invariant=o;var a=Object.prototype.hasOwnProperty,i=Array.prototype.splice,c=Object.prototype.toString;function u(t){return c.call(t).slice(8,-1)}var l=Object.assign||function(t,e){return s(e).forEach((function(r){a.call(e,r)&&(t[r]=e[r])})),t},s="function"==typeof Object.getOwnPropertySymbols?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function f(t){return Array.isArray(t)?l(t.constructor(t.length),t):"Map"===u(t)?new Map(t):"Set"===u(t)?new Set(t):t&&"object"==typeof t?l(Object.create(Object.getPrototypeOf(t)),t):t}var p=function(){function t(){this.commands=l({},y),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(t,e){return t===e},this.update.newContext=function(){return(new t).update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(t){this.update.isEquals=t},enumerable:!0,configurable:!0}),t.prototype.extend=function(t,e){this.commands[t]=e},t.prototype.update=function(t,e){var r=this,n="function"==typeof e?{$apply:e}:e;Array.isArray(t)&&Array.isArray(n)||o(!Array.isArray(n),(function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."})),o("object"==typeof n&&null!==n,(function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(r.commands).join(", ")+"."}));var i=t;return s(n).forEach((function(e){if(a.call(r.commands,e)){var o=t===i;i=r.commands[e](n[e],i,n,t),o&&r.isEquals(i,t)&&(i=t)}else{var c="Map"===u(t)?r.update(t.get(e),n[e]):r.update(t[e],n[e]),l="Map"===u(i)?i.get(e):i[e];r.isEquals(c,l)&&(void 0!==c||a.call(t,e))||(i===t&&(i=f(t)),"Map"===u(i)?i.set(e,c):i[e]=c)}})),i},t}();e.Context=p;var y={$push:function(t,e,r){return h(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return h(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,n,a){return function(t,e){o(Array.isArray(t),(function(){return"Expected $splice target to be an array; got "+r(t)})),m(e.$splice)}(e,n),t.forEach((function(t){m(t),e===a&&t.length&&(e=f(a)),i.apply(e,t)})),e},$set:function(t,e,r){return function(t){o(1===Object.keys(t).length,(function(){return"Cannot have more than one key in an object with $set"}))}(r),t},$toggle:function(t,e){v(t,"$toggle");var r=t.length?f(e):e;return t.forEach((function(t){r[t]=!e[t]})),r},$unset:function(t,e,r,n){return v(t,"$unset"),t.forEach((function(t){Object.hasOwnProperty.call(e,t)&&(e===n&&(e=f(n)),delete e[t])})),e},$add:function(t,e,r,n){return b(e,"$add"),v(t,"$add"),"Map"===u(e)?t.forEach((function(t){var r=t[0],o=t[1];e===n&&e.get(r)!==o&&(e=f(n)),e.set(r,o)})):t.forEach((function(t){e!==n||e.has(t)||(e=f(n)),e.add(t)})),e},$remove:function(t,e,r,n){return b(e,"$remove"),v(t,"$remove"),t.forEach((function(t){e===n&&e.has(t)&&(e=f(n)),e.delete(t)})),e},$merge:function(t,e,n,a){var i,c;return i=e,o((c=t)&&"object"==typeof c,(function(){return"update(): $merge expects a spec of type 'object'; got "+r(c)})),o(i&&"object"==typeof i,(function(){return"update(): $merge expects a target of type 'object'; got "+r(i)})),s(t).forEach((function(r){t[r]!==e[r]&&(e===a&&(e=f(a)),e[r]=t[r])})),e},$apply:function(t,e){var n;return o("function"==typeof(n=t),(function(){return"update(): expected spec of $apply to be a function; got "+r(n)+"."})),t(e)}},d=new p;function h(t,e,n){o(Array.isArray(t),(function(){return"update(): expected target of "+r(n)+" to be an array; got "+r(t)+"."})),v(e[n],n)}function v(t,e){o(Array.isArray(t),(function(){return"update(): expected spec of "+r(e)+" to be an array; got "+r(t)+". Did you forget to wrap your parameter in an array?"}))}function m(t){o(Array.isArray(t),(function(){return"update(): expected spec of $splice to be an array of arrays; got "+r(t)+". Did you forget to wrap your parameters in an array?"}))}function b(t,e){var n=u(t);o("Map"===n||"Set"===n,(function(){return"update(): "+r(e)+" expects a target of type Set or Map; got "+r(n)}))}e.isEquals=d.update.isEquals,e.extend=d.extend,e.default=d.update,e.default.default=t.exports=l(e.default,e)},t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},(t,e,r)=>{var n=r(7),o=r(28),a=r(29),i=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":i&&i in Object(t)?o(t):a(t)}},(t,e,r)=>{var n=r(8),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();t.exports=a},t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},t=>{t.exports=function(t){return t}},(t,e,r)=>{var n=r(2),o=r(1);t.exports=function(t){if(!o(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},(t,e,r)=>{var n=r(3).Symbol;t.exports=n},(t,e,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=n},t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},(t,e,r)=>{var n=r(6),o=r(11);t.exports=function(t){return null!=t&&o(t.length)&&!n(t)}},t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,r){var n=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<r}},(t,e,r)=>{t=r.nmd(t);var n=r(3),o=r(42),a=e&&!e.nodeType&&e,i=a&&t&&!t.nodeType&&t,c=i&&i.exports===a?n.Buffer:void 0,u=(c?c.isBuffer:void 0)||o;t.exports=u},(t,e,r)=>{t=r.nmd(t);var n=r(8),o=e&&!e.nodeType&&e,a=o&&t&&!t.nodeType&&t,i=a&&a.exports===o&&n.process,c=function(){try{var t=a&&a.require&&a.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=c},e=>{"use strict";e.exports=t},t=>{"use strict";t.exports=o},t=>{"use strict";t.exports=r},(t,e,r)=>{var n=r(19),o=r(9),a=r(35),i=r(36),c=Object.prototype,u=c.hasOwnProperty,l=n((function(t,e){t=Object(t);var r=-1,n=e.length,l=n>2?e[2]:void 0;for(l&&a(e[0],e[1],l)&&(n=1);++r<n;)for(var s=e[r],f=i(s),p=-1,y=f.length;++p<y;){var d=f[p],h=t[d];(void 0===h||o(h,c[d])&&!u.call(t,d))&&(t[d]=s[d])}return t}));t.exports=l},(t,e,r)=>{var n=r(5),o=r(20),a=r(22);t.exports=function(t,e){return a(o(t,e,n),t+"")}},(t,e,r)=>{var n=r(21),o=Math.max;t.exports=function(t,e,r){return e=o(void 0===e?t.length-1:e,0),function(){for(var a=arguments,i=-1,c=o(a.length-e,0),u=Array(c);++i<c;)u[i]=a[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=a[i];return l[e]=r(u),n(t,this,l)}}},t=>{t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},(t,e,r)=>{var n=r(23),o=r(34)(n);t.exports=o},(t,e,r)=>{var n=r(24),o=r(25),a=r(5),i=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:a;t.exports=i},t=>{t.exports=function(t){return function(){return t}}},(t,e,r)=>{var n=r(26),o=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},(t,e,r)=>{var n=r(27),o=r(33);t.exports=function(t,e){var r=o(t,e);return n(r)?r:void 0}},(t,e,r)=>{var n=r(6),o=r(30),a=r(1),i=r(32),c=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,s=u.toString,f=l.hasOwnProperty,p=RegExp("^"+s.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!a(t)||o(t))&&(n(t)?p:c).test(i(t))}},(t,e,r)=>{var n=r(7),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,c=n?n.toStringTag:void 0;t.exports=function(t){var e=a.call(t,c),r=t[c];try{t[c]=void 0;var n=!0}catch(t){}var o=i.call(t);return n&&(e?t[c]=r:delete t[c]),o}},t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},(t,e,r)=>{var n,o=r(31),a=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!a&&a in t}},(t,e,r)=>{var n=r(3)["__core-js_shared__"];t.exports=n},t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},t=>{var e=Date.now;t.exports=function(t){var r=0,n=0;return function(){var o=e(),a=16-(o-n);if(n=o,a>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}},(t,e,r)=>{var n=r(9),o=r(10),a=r(12),i=r(1);t.exports=function(t,e,r){if(!i(r))return!1;var c=typeof e;return!!("number"==c?o(r)&&a(e,r.length):"string"==c&&e in r)&&n(r[e],t)}},(t,e,r)=>{var n=r(37),o=r(46),a=r(10);t.exports=function(t){return a(t)?n(t,!0):o(t)}},(t,e,r)=>{var n=r(38),o=r(39),a=r(41),i=r(13),c=r(12),u=r(43),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var r=a(t),s=!r&&o(t),f=!r&&!s&&i(t),p=!r&&!s&&!f&&u(t),y=r||s||f||p,d=y?n(t.length,String):[],h=d.length;for(var v in t)!e&&!l.call(t,v)||y&&("length"==v||f&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||c(v,h))||d.push(v);return d}},t=>{t.exports=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}},(t,e,r)=>{var n=r(40),o=r(4),a=Object.prototype,i=a.hasOwnProperty,c=a.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(t){return o(t)&&i.call(t,"callee")&&!c.call(t,"callee")};t.exports=u},(t,e,r)=>{var n=r(2),o=r(4);t.exports=function(t){return o(t)&&"[object Arguments]"==n(t)}},t=>{var e=Array.isArray;t.exports=e},t=>{t.exports=function(){return!1}},(t,e,r)=>{var n=r(44),o=r(45),a=r(14),i=a&&a.isTypedArray,c=i?o(i):n;t.exports=c},(t,e,r)=>{var n=r(2),o=r(11),a=r(4),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,t.exports=function(t){return a(t)&&o(t.length)&&!!i[n(t)]}},t=>{t.exports=function(t){return function(e){return t(e)}}},(t,e,r)=>{var n=r(1),o=r(47),a=r(48),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return a(t);var e=o(t),r=[];for(var c in t)("constructor"!=c||!e&&i.call(t,c))&&r.push(c);return r}},t=>{var e=Object.prototype;t.exports=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||e)}},t=>{t.exports=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}},,t=>{"use strict";t.exports=e},t=>{"use strict";t.exports=n}],i={};function c(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={id:t,loaded:!1,exports:{}};return a[t](r,r.exports,c),r.loaded=!0,r.exports}c.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return c.d(e,{a:e}),e},c.d=(t,e)=>{for(var r in e)c.o(e,r)&&!c.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),c.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),c.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var u={};return(()=>{"use strict";c.r(u),c.d(u,{plugin:()=>nt});var t=c(15),e=c(50);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(){a=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),c=new F(n||[]);return o(i,"_invoke",{value:O(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var y={};function d(){}function h(){}function v(){}var m={};s(m,c,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(T([])));g&&g!==e&&n.call(g,c)&&(m=g);var w=v.prototype=d.prototype=Object.create(m);function j(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function a(o,i,c,u){var l=p(t[o],t,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==r(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){a("next",t,c,u)}),(function(t){a("throw",t,c,u)})):e.resolve(f).then((function(t){s.value=t,c(s)}),(function(t){return a("throw",t,c,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){a(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,y):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function T(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:h,configurable:!0}),h.displayName=s(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},j(x.prototype),s(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(f(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},j(w),s(w,l,"Generator"),s(w,c,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=T,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),y}},t}function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i.apply(this,arguments)}function l(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){l(a,n,o,i,c,"next",t)}function c(t){l(a,n,o,i,c,"throw",t)}i(void 0)}))}}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function m(t,e,r){return(e=b(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r(e)?e:String(e)}var g=function(r){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(b,r);var o,c,u,l,d,v=y(b);function b(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b),m(h(r=v.call(this,t)),"instanceSettings",void 0),m(h(r),"setImageCache",(function(t){})),m(h(r),"retrieveImageCache",(function(){})),m(h(r),"request",function(){var t=s(a().mark((function t(r,n,o){var c,u,l;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=!1,u=1e3;case 2:return t.prev=2,t.next=5,(0,e.getBackendSrv)().datasourceRequest(i({method:n,url:r},o));case 5:return l=t.sent,c=!0,t.abrupt("return",l);case 10:return t.prev=10,t.t0=t.catch(2),t.next=14,new Promise((function(t){return setTimeout(t,u)}));case 14:u*=1.2;case 15:if(!1===c){t.next=2;break}case 16:return t.abrupt("return",null);case 17:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,r,n){return t.apply(this,arguments)}}()),r.instanceSettings=t,r}return o=b,c=[{key:"query",value:(d=s(a().mark((function e(r){var o,c,u,l=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(this.instanceSettings.jsonData.endpoint+"/filter","POST",{method:"POST",headers:{"Accept-Type":"application/json","Content-Type":"application/json"},data:JSON.stringify({query:this.instanceSettings.jsonData.primaryServerFilter,query2:this.instanceSettings.jsonData.secondaryServerFilter,invert:this.instanceSettings.jsonData.invertPrimaryServerFilter,invert2:this.instanceSettings.jsonData.invertSecondaryServerFilter})});case 2:return e.next=4,this.request(this.instanceSettings.jsonData.endpoint+"/images","GET");case 4:if(e.t1=o=e.sent,e.t0=null===e.t1,e.t0){e.next=8;break}e.t0=void 0===o;case 8:if(!e.t0){e.next=12;break}e.t2=void 0,e.next=13;break;case 12:e.t2=o.data;case 13:return c=e.t2,Object.keys(c).map((function(t){var e=i({},c[t]);delete e.img,delete e.metric,delete e.id})),u=r.targets.map((function(e){var r=i({},c);if(e.primaryPanelFilter||e.secondaryPanelFilter)for(var o in r){var a=r[o],u=a.metric+","+JSON.stringify(a.tags)+","+JSON.stringify({status:a.status})+","+a.type+","+JSON.stringify({features:a.features})+","+JSON.stringify({cardinality:a.cardinality})+","+JSON.stringify({plot:a.plot});try{if(e.primaryPanelFilter)if(e.primaryPanelFilterInvert){if(u.match("".concat(e.primaryPanelFilter))){delete r[o];continue}}else if(!u.match("".concat(e.primaryPanelFilter))){delete r[o];continue}if(e.secondaryPanelFilter)if(e.secondaryPanelFilterInvert){if(u.match("".concat(e.secondaryPanelFilter))){delete r[o];continue}}else if(!u.match("".concat(e.secondaryPanelFilter))){delete r[o];continue}}catch(t){delete r[o];continue}}var s={critical:[],warning:[],normal:[]};for(var f in r){var p,y,d,h,v,m,b=r[f],g=("alpha"===e.sortBy?-b.metric.charCodeAt(0):"spike"===e.sortBy?b.stats.spike:"rstd"===e.sortBy?b.stats.rstd:"max"===e.sortBy?b.stats.max:"rmax"===e.sortBy?b.stats.rmax:"mean"===e.sortBy?b.stats.mean:b.stats.std)+Math.abs((null!==(p=null===(y=b.features.increasing)||void 0===y?void 0:y.increase)&&void 0!==p?p:0)+(null!==(d=null===(h=b.features.decreasing)||void 0===h?void 0:h.decrease)&&void 0!==d?d:0))+Math.abs((null===(v=b.features.hockeystick)||void 0===v?void 0:v.increasing)||(null===(m=b.features.hockeystick)||void 0===m?void 0:m.increasing)||0);b.weight=g,s[c[f].status].push(b)}for(var w in s)s[w]=s[w].filter((function(t){return t.plot===e.metricType})),s[w]=s[w].sort((function(t,e){return t.weight<e.weight?1:t.weight>e.weight?-1:0}));return new t.MutableDataFrame({name:"anomalizer",refId:e.refId,fields:[{name:"Images",values:[[].concat(n(s.critical),n(s.warning),n(s.normal))],config:{custom:{instanceSettings:l.instanceSettings}}}]})})),e.abrupt("return",{data:u});case 17:case"end":return e.stop()}}),e,this)}))),function(t){return d.apply(this,arguments)})},{key:"testDatasource",value:(l=s(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request(this.instanceSettings.jsonData.endpoint,"GET");case 2:if(null==(e=t.sent)||!e.ok){t.next=7;break}return t.abrupt("return",{status:"success",message:"Connection to remote OK"});case 7:return t.abrupt("return",{status:"error",message:"Connection to remote failed. Check the entered endpoint."});case 8:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})}],c&&f(o.prototype,c),u&&f(o,u),Object.defineProperty(o,"prototype",{writable:!1}),b}(t.DataSourceApi),w=c(16),j=c.n(w),x=c(17),O=c(0),S=c.n(O),P={primaryPanelFilterInvert:!1,secondaryPanelFilterInvert:!1,sortBy:"rstd",metricType:"timeseries"},E={endpoint:"https://engine.anomalizer.app",primaryServerFilter:"",secondaryServerFilter:"",invertPrimaryServerFilter:!1,invertSecondaryServerFilter:!1},F=c(51);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,I(n.key),n)}}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=D(t);if(e){var o=D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $(this,r)}}function $(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return C(t)}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}function L(t,e,r){return(e=I(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I(t){var e=function(t,e){if("object"!==T(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===T(e)?e:String(e)}var N=x.LegacyForms.FormField,M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}(a,t);var e,r,n,o=R(a);function a(){var t;_(this,a);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return L(C(t=o.call.apply(o,[this].concat(r))),"render",(function(){var e=(0,F.defaults)(t.props.options.jsonData,E);return j().createElement("div",{className:"gf-form-group"},j().createElement("div",{className:"gf-form",style:{display:"flex",flexDirection:"column"}},j().createElement(N,{label:"Endpoint",labelWidth:6,inputWidth:20,onChange:function(e){t.props.onOptionsChange(S()(t.props.options,{jsonData:{endpoint:{$set:e.target.value}}}))},value:e.endpoint,placeholder:"https://engine.anomalizer.app"}),j().createElement("div",{style:{height:20}}),j().createElement("div",{style:{flexDirection:"row"}},j().createElement(N,{label:"Primary Server Filter",labelWidth:10,inputWidth:20,onChange:function(e){t.props.onOptionsChange(S()(t.props.options,{jsonData:{primaryServerFilter:{$set:e.target.value}}}))},value:e.primaryServerFilter,placeholder:"foo"}),j().createElement("div",{style:{height:5}}),j().createElement(x.Select,{options:[{label:"and results should match this",value:!1},{label:"and results should NOT match this",value:!0}],value:{label:e.invertPrimaryServerFilter?"and results should NOT match this":"and results should match this",value:e.invertPrimaryServerFilter},onChange:function(e){var r;t.props.onOptionsChange(S()(t.props.options,{jsonData:{invertPrimaryServerFilter:{$set:null!==(r=e.value)&&void 0!==r&&r}}}))}}),j().createElement("div",{style:{height:20}}),j().createElement("div",{style:{flexDirection:"row"}},j().createElement(N,{label:"Secondary Server Filter",labelWidth:10,inputWidth:20,onChange:function(e){t.props.onOptionsChange(S()(t.props.options,{jsonData:{secondaryServerFilter:{$set:e.target.value}}}))},value:e.secondaryServerFilter,placeholder:"bar"}),j().createElement("div",{style:{height:5}}),j().createElement(x.Select,{options:[{label:"and results should match this",value:!1},{label:"and results should NOT match this",value:!0}],value:{label:e.invertSecondaryServerFilter?"and results should NOT match this":"and results should match this",value:e.invertSecondaryServerFilter},onChange:function(e){var r;t.props.onOptionsChange(S()(t.props.options,{jsonData:{invertSecondaryServerFilter:{$set:null!==(r=e.value)&&void 0!==r&&r}}}))}})))))})),t}return e=a,r&&A(e.prototype,r),n&&A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(w.PureComponent),B=c(18),q=c.n(B),H=function(t,e){if(!e)return"";if("toHumanReadable"===t)switch(e){case"timeseries":return"Time Series";case"scatter":return"Scatter";default:throw new Error("Invalid nonHR parameter "+e)}else{if("fromHumanReadable"!==t)throw new Error("Invalid operation "+t);switch(e){case"Time Series":return"timeseries";case"Scatter":return"scatter";default:throw new Error("Invalid HR parameter "+e)}}},G=function(t,e){if(!e)return"";if("toHumanReadable"===t)switch(e){case"alpha":return"Alpha";case"max":return"Max";case"rmax":return"-Max";case"mean":return"Mean";case"rstd":return"RSTD";case"spike":return"Spike";default:throw new Error("Invalid nonHR parameter "+e)}else{if("fromHumanReadable"!==t)throw new Error("Invalid operation "+t);switch(e){case"Alpha":return"alpha";case"Max":return"max";case"-Max":return"rmax";case"Mean":return"mean";case"RSTD":return"rstd";case"Spike":return"spike";default:throw new Error("Invalid HR parameter "+e)}}};function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function J(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z(n.key),n)}}function Y(t,e){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Y(t,e)}function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=V(t);if(e){var o=V(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Q(this,r)}}function Q(t,e){if(e&&("object"===W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return K(t)}function K(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V(t){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},V(t)}function X(t,e,r){return(e=Z(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z(t){var e=function(t,e){if("object"!==W(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===W(e)?e:String(e)}var tt=x.LegacyForms.FormField,et=x.LegacyForms.Select,rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y(t,e)}(a,t);var e,r,n,o=z(a);function a(){var t;J(this,a);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return X(K(t=o.call.apply(o,[this].concat(r))),"onChange",(function(e,r){t.props.onChange(S()(t.props.query,X({},e,{$set:r}))),t.props.onRunQuery()})),t}return e=a,(r=[{key:"render",value:function(){var t=this,e=q()(this.props.query,P);return j().createElement("div",{className:"gf-form",style:{display:"flex",flexDirection:"column"}},j().createElement("div",{style:{display:"flex",flexDirection:"row"}},j().createElement(tt,{value:e.primaryPanelFilter,onChange:function(e){return t.onChange("primaryPanelFilter",e.target.value)},label:"Primary Panel Filter",tooltip:"The primary metric filter to be performed inside the Datasource",labelWidth:100,width:400}),j().createElement(et,{options:[{label:"and results should match this",value:!1},{label:"and results should NOT match this",value:!0}],value:{label:e.primaryPanelFilterInvert?"and results should NOT match this":"and results should match this",value:e.primaryPanelFilterInvert},onChange:function(e){return t.onChange("primaryPanelFilterInvert",e.value)}})),j().createElement("div",{style:{height:5}}),j().createElement("div",{style:{display:"flex",flexDirection:"row"}},j().createElement(tt,{value:e.secondaryPanelFilter,onChange:function(e){return t.onChange("secondaryPanelFilter",e.target.value)},label:"Secondary Panel Filter",tooltip:"The secondary metric filter to be performed inside the Datasource",labelWidth:100,width:400}),j().createElement(et,{options:[{label:"and results should match this",value:!1},{label:"and results should NOT match this",value:!0}],value:{label:e.secondaryPanelFilterInvert?"and results should NOT match this":"and results should match this",value:e.secondaryPanelFilterInvert},onChange:function(e){return t.onChange("secondaryPanelFilterInvert",e.value)}})),j().createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:5}},j().createElement(x.Label,{className:"gf-form-label",style:{paddingLeft:5,paddingRight:5,marginRight:5,color:"#c7d0d9"}},"Sort Metrics By"),j().createElement("div",{style:{width:5}}),j().createElement(et,{options:["alpha","max","rmax","mean","rstd","spike"].map((function(t){return{label:G("toHumanReadable",t),value:e.sortBy===t}})),value:{label:e.sortBy?G("toHumanReadable",e.sortBy):"RSTD",value:!0},onChange:function(e){return t.onChange("sortBy",G("fromHumanReadable",e.label))}})),j().createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:5}},j().createElement(x.Label,{className:"gf-form-label",style:{paddingLeft:5,paddingRight:5,marginRight:5,color:"#c7d0d9"}},"Metric Type"),j().createElement("div",{style:{width:5}}),j().createElement(et,{options:["timeseries","scatter"].map((function(t){return{label:H("toHumanReadable",t),value:e.metricType===t}})),value:{label:e.metricType?H("toHumanReadable",e.metricType):"RSTD",value:!0},onChange:function(e){return t.onChange("metricType",H("fromHumanReadable",e.label))}})))}}])&&U(e.prototype,r),n&&U(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(w.PureComponent),nt=new t.DataSourcePlugin(g).setConfigEditor(M).setQueryEditor(rt)})(),u})()));
//# sourceMappingURL=module.js.map